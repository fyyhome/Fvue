!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n{constructor(){this.sub=[]}addSub(t){this.sub.push(t)}notify(){this.sub.forEach(t=>{t.update()})}}n.prototype.target=null;class o{constructor(t,e,i){this.vm=t,this.prop=e,this.callback=i,this.value=this.get()}update(){const t=this.vm.$data[this.prop];t!==this.value&&(this.value=t,this.callback(t))}get(){n.target=this;const t=this.vm.$data[this.prop];return n.target=null,t}}class r{constructor(t){this.vm=t,this.el=t.$el,this.fragment=null,this.init()}init(){this.fragment=this.nodeFragment(this.el),this.compileNode(this.fragment),this.el.appendChild(this.fragment)}nodeFragment(t){const e=document.createDocumentFragment();let i=t.firstChild;for(;i;)e.appendChild(i),i=t.firstChild;return e}compileNode(t){[...t.childNodes].forEach(t=>{if(this.isElementNode(t))this.compile(t);else{let e=/\{\{(.*)\}\}/,i=t.textContent;if(e.test(i)){let n=e.exec(i)[1];this.compileText(t,n)}}t.childNodes&&t.childNodes.length&&this.compileNode(t)})}compile(t){[...t.attributes].forEach(e=>{if(this.isDrective(e.name)){let i=e.value;"fv-model"===e.name?this.compileModel(t,i):"fv-show"===e.name?this.compileShow(t,i):"fv-on"===e.name.split(":")[0]&&this.compileOn(t,e.name.split(":")[1],i)}})}compileText(t,e){let i=this.vm.$data[e];this.updateView(t,i),new o(this.vm,e,e=>{this.updateView(t,e)})}compileModel(t,e){let i=this.vm.$data[e];this.updateModel(t,i),new o(this.vm,e,e=>{this.updateModel(t,e)}),t.addEventListener("input",t=>{let i=t.target.value;i!==this.vm.$data[e]&&(this.vm.$data[e]=i)})}compileShow(t,e){let i=this.vm.$data[e];this.updateShow(t,i),new o(this.vm,e,e=>{this.updateShow(t,e)})}updateModel(t,e){t.value=void 0===e?"":e}updateView(t,e){t.textContent=void 0===e?"undefined":e}updateShow(t,e){t.style.display=Boolean(e)?"block":"none"}isDrective(t){return-1!==t.indexOf("fv-")}isElementNode(t){return 1===t.nodeType}isTextNode(t){return 3===t.nodeType}compileOn(t,e,i){t.addEventListener(e,this.vm.$method[i].bind(new Proxy(this.vm,{get(t,e){if(t.$data.hasOwnProperty(e))return Reflect.get(t.$data,e);if(t.$method.hasOwnProperty(e))return Reflect.get(t.$method,e);throw new Error(`${e}属性未定义`)},set(t,e,i){if(t.$data.hasOwnProperty(e))return Reflect.set(t.$data,e,i);if(t.$method.hasOwnProperty(e))return Reflect.set(t.$method,e,i);throw new Error(`${e}属性未定义`)}})))}}window.Fvue=class{constructor(t){this.$options=t,this.$target=t.data,this.$data=null,this.$method=t.method,this.$el=document.querySelector(t.el),this.init()}init(){this.$data=function t(e){if(null===e||"object"!=typeof e)return;let i=new n,o={get:(t,e)=>(n.target&&i.addSub(n.target),Reflect.get(t,e)),set:(t,e,n)=>t[e]===n||(Reflect.set(t,e,n),i.notify(),!0)};return Object.keys(e).forEach(i=>{null!==e[i]&&"object"==typeof e[i]&&(e[i]=t(e[i]))}),new Proxy(e,o)}(this.$target),new r(this)}}}]);